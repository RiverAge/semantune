# ğŸµ Navidrome è¯­ä¹‰éŸ³ä¹æ¨èç³»ç»Ÿ

åŸºäº LLM è¯­ä¹‰æ ‡ç­¾çš„ä¸ªæ€§åŒ–éŸ³ä¹æ¨èç³»ç»Ÿï¼Œä¸º Navidrome éŸ³ä¹æœåŠ¡å™¨æä¾›æ™ºèƒ½æ¨èåŠŸèƒ½ã€‚

> **æœ¬é¡¹ç›®ç”± [GLM-4.7](https://open.bigmodel.cn/) æ™ºèƒ½ç”Ÿæˆ**

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ—¨åœ¨ä¸ºä¸ªäººéŸ³ä¹åº“æ„å»ºä¸€ä¸ª**è½»é‡çº§ã€é«˜ç²¾åº¦**çš„æ¨èç³»ç»Ÿï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š

1. **è¯­ä¹‰æ ‡ç­¾ç”Ÿæˆ** - ä½¿ç”¨ NVIDIA API (Llama-3.3-70B) è‡ªåŠ¨ä¸ºéŸ³ä¹åº“ä¸­çš„æ¯é¦–æ­Œæ‰“ä¸Šæƒ…ç»ªã€èƒ½é‡ã€æµæ´¾ç­‰æ ‡ç­¾
2. **ç”¨æˆ·ç”»åƒå³æ—¶æ„å»º** - åŸºäºæ’­æ”¾å†å²ã€æ”¶è—å’Œæ­Œå•ï¼Œå®æ—¶åˆ†æç”¨æˆ·çš„éŸ³ä¹åå¥½ï¼ˆæ— éœ€é¢„å…ˆç”Ÿæˆæ–‡ä»¶ï¼‰
3. **ä¸ªæ€§åŒ–æ¨è** - é€šè¿‡å‘é‡ç›¸ä¼¼åº¦è®¡ç®—ï¼Œæ¨èç”¨æˆ·å¯èƒ½å–œæ¬¢ä½†æœªå¬è¿‡çš„æ­Œæ›²

### ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

- âœ… **æ— éœ€å¤§é‡ç”¨æˆ·æ•°æ®** - é€‚åˆä¸ªäºº/å°å›¢é˜Ÿä½¿ç”¨ï¼Œä¸ä¾èµ–ååŒè¿‡æ»¤
- âœ… **æœ¬åœ°è¿è¡Œ** - æ‰€æœ‰æ•°æ®å’Œè®¡ç®—éƒ½åœ¨æœ¬åœ°ï¼Œä¿æŠ¤éšç§
- âœ… **é«˜å‡†ç¡®ç‡** - è¯­ä¹‰æ ‡ç­¾å‡†ç¡®ç‡ > 90%ï¼ˆåŸºäºå®æµ‹ï¼‰
- âœ… **æ˜“äºæ‰©å±•** - æ¨¡å—åŒ–è®¾è®¡ï¼Œå¯è½»æ¾æ·»åŠ æ–°åŠŸèƒ½
- âœ… **ä»£ç è´¨é‡** - ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨é˜²æ­¢è¿æ¥æ³„æ¼ï¼Œå®Œå–„çš„è¾“å…¥éªŒè¯

### ğŸ“ æœ€è¿‘æ›´æ–°

**v1.8.0** (2026-02-03)
- âœ… æ·»åŠ å®Œæ•´çš„æµ‹è¯•æ¡†æ¶ - ä½¿ç”¨ pytest ä½œä¸ºæµ‹è¯•æ¡†æ¶
- âœ… æ·»åŠ å•å…ƒæµ‹è¯• - ä¸ºæ ¸å¿ƒæ¨¡å—æ·»åŠ  39 ä¸ªå•å…ƒæµ‹è¯•
- âœ… æµ‹è¯•è¦†ç›–ç‡ - æ ¸å¿ƒæ¨¡å—æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ° 100%
- âœ… æµ‹è¯•æ–‡æ¡£ - æ·»åŠ è¯¦ç»†çš„æµ‹è¯•æ–‡æ¡£å’Œè¿è¡ŒæŒ‡å—

**v1.7.0** (2026-02-03)
- âœ… æ ‡ç­¾ç™½åå•é…ç½®è¿ç§» - å°†æ ‡ç­¾ç™½åå•ï¼ˆmoodã€energyã€sceneã€regionã€subcultureã€genreï¼‰ä»å‰ç«¯ç•Œé¢è¿ç§»åˆ°åå°é…ç½®æ–‡ä»¶ `config/tagging_config.yaml`
- âœ… ç®€åŒ–æ ‡ç­¾é…ç½®ç•Œé¢ - å‰ç«¯åªä¿ç•™ API é…ç½®ï¼ˆè¶…æ—¶ã€Tokenã€æ¸©åº¦ç­‰å‚æ•°ï¼‰
- âœ… æ—¥å¿—çº§åˆ«æ”¯æŒç¯å¢ƒå˜é‡ - æ‰€æœ‰ API è·¯ç”±æ¨¡å—æ”¯æŒé€šè¿‡ `LOG_LEVEL` ç¯å¢ƒå˜é‡æ§åˆ¶æ—¥å¿—çº§åˆ«
- âœ… DEBUG æ—¥å¿—ä¿®å¤ - ä¿®å¤ DEBUG æ—¥å¿—ä¸æ˜¾ç¤ºçš„é—®é¢˜ï¼Œç°åœ¨å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ç»Ÿä¸€æ§åˆ¶

**v1.6.0** (2026-02-03)
- âœ… æ–°å¢æ¨èå¯¼å‡ºåŠŸèƒ½ - æ”¯æŒå¯¼å‡ºæ¨èæŠ¥å‘Šä¸ºMarkdownæ–‡ä»¶
- âœ… å¯¼å‡ºå†…å®¹åŒ…å«ç”¨æˆ·ç”»åƒç»Ÿè®¡ã€æ’­æ”¾å†å²ã€æ”¶è—æ­Œæ›²ã€æ­Œå•ä¿¡æ¯å’Œæ¨èæ­Œæ›²
- âœ… å‰ç«¯æ·»åŠ å¯¼å‡ºæŒ‰é’®ï¼Œä¸€é”®ä¸‹è½½å®Œæ•´æ¨èæŠ¥å‘Š

**v1.5.0** (2026-02-03)
- âœ… æ–°å¢ç¼“å­˜æ¨¡å— - `src/core/cache.py` æä¾›ç¼“å­˜åŠŸèƒ½
- âœ… æ–°å¢é…ç½®éªŒè¯å™¨ - `src/core/config_validator.py` é…ç½®éªŒè¯
- âœ… æ–°å¢æ•°æ®åº“è¿ç§»æ¨¡å— - `src/core/migration/` æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†
- âœ… æ–°å¢å“åº”æ¨¡å— - `src/core/response.py` ç»Ÿä¸€å“åº”æ ¼å¼
- âœ… æ¨èè·¯ç”±æ¨¡å—åŒ– - `src/api/routes/recommend/` ç‹¬ç«‹æ¨¡å—
- âœ… æ ‡ç­¾è·¯ç”±æ¨¡å—åŒ– - `src/api/routes/tagging/` ç‹¬ç«‹æ¨¡å—
- âœ… YAML é…ç½®æ–‡ä»¶ - `config/recommend_config.yaml` å’Œ `config/tagging_config.yaml`
- âœ… å‰ç«¯ç»„ä»¶å®Œå–„ - è®¾ç½®å’Œæ ‡ç­¾é¡µé¢æ–°å¢å¤šä¸ªå­ç»„ä»¶

**v1.4.0** (2026-02-03)
- âœ… ä»£ç é‡æ„ - æ‹†åˆ†å¤§æ–‡ä»¶ï¼Œæå‡ä»£ç å¯ç»´æŠ¤æ€§
- âœ… å‰ç«¯ç»„ä»¶æ‹†åˆ† - Tagging.tsx å’Œ Settings.tsx æ‹†åˆ†ä¸ºå¤šä¸ªå­ç»„ä»¶
- âœ… åç«¯æ¨¡å—æ‹†åˆ† - Repositoryã€Serviceã€API è·¯ç”±å±‚æ¨¡å—åŒ–
- âœ… é…ç½®è·¯ç”±æ‹†åˆ† - config.py æ‹†åˆ†ä¸º API é…ç½®å’Œ YAML é…ç½®ç®¡ç†
- âœ… æ ‡ç­¾è·¯ç”±æ‹†åˆ† - tagging.py æ‹†åˆ†ä¸º SSE å’Œåå°ä»»åŠ¡æ¨¡å—

**v1.3.0** (2026-02-03)
- âœ… é…ç½®ç®¡ç†é‡æ„ - API Key é…ç½®ä»å‰ç«¯ localStorage è¿ç§»åˆ°åç«¯ .env æ–‡ä»¶
- âœ… æ–°å¢é…ç½®ç®¡ç† API - æ”¯æŒé€šè¿‡ API è·å–ã€æ›´æ–°ã€é‡ç½®é…ç½®
- âœ… é…ç½®è‡ªåŠ¨é‡è½½ - æ›´æ–°é…ç½®åè‡ªåŠ¨é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡ï¼Œæ— éœ€é‡å¯æœåŠ¡
- âœ… API Key è„±æ•æ˜¾ç¤º - è¿”å›æ—¶è‡ªåŠ¨è„±æ•ï¼Œä¿æŠ¤æ•æ„Ÿä¿¡æ¯
- âœ… ä¿®å¤æ•°æ®åº“ç´¢å¼•é”™è¯¯ - ç§»é™¤ annotation è¡¨ç´¢å¼•ï¼ˆè¯¥è¡¨å±äº Navidrome æ•°æ®åº“ï¼‰

**v1.2.0** (2026-02-03)
- âœ… æ¶æ„é‡æ„ - å®ç°åˆ†å±‚æ¶æ„ (API/CLI â†’ Service â†’ Repository â†’ Database)
- âœ… åˆ›å»º Repository å±‚ - å°è£…æ‰€æœ‰æ•°æ®è®¿é—®é€»è¾‘
- âœ… åˆ›å»º Service å±‚ - å°è£…æ‰€æœ‰ä¸šåŠ¡é€»è¾‘
- âœ… åˆ›å»º CLI å±‚ - ç»Ÿä¸€å‘½ä»¤è¡Œæ¥å£
- âœ… ä¿®å¤å‰ç«¯é”™è¯¯æ˜¾ç¤º - æ­£ç¡®æå–åç«¯é”™è¯¯æ¶ˆæ¯
- âœ… ä¿®å¤æ¨èç®—æ³• - æ¢å¤åŸå§‹åŠ æƒç›¸ä¼¼åº¦è®¡ç®—é€»è¾‘
- âœ… ä¿®å¤ API ç«¯ç‚¹ä¸åŒ¹é… - ç»Ÿä¸€å‰åç«¯æ¥å£

**v1.1.1** (2026-02-03)
- âœ… ä¿®å¤ FastAPI è·¯ç”±å‚æ•°é”™è¯¯ - GET è¯·æ±‚æŸ¥è¯¢å‚æ•°ä½¿ç”¨ Query è€Œé Field
- âœ… ä¿®å¤ API å¯åŠ¨å¤±è´¥é—®é¢˜ - è§£å†³ AssertionError: non-body parameters é”™è¯¯

**v1.1.0** (2026-02-03)
- âœ… æ¶ˆé™¤ä»£ç é‡å¤ - æå–å…±äº«å‡½æ•°åˆ° `src/utils/user.py`
- âœ… ä¿®å¤æ•°æ®åº“è¿æ¥ç®¡ç† - æ‰€æœ‰ API è·¯ç”±ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨
- âœ… æ·»åŠ è¾“å…¥éªŒè¯ - ä½¿ç”¨ Pydantic Field è¿›è¡Œå‚æ•°éªŒè¯
- âœ… ä»£ç ç»“æ„ä¼˜åŒ– - æå‡å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Navidrome éŸ³ä¹æœåŠ¡å™¨                        â”‚
â”‚                  (navidrome.db - æ’­æ”¾å†å²)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              è¯­ä¹‰æ ‡ç­¾ç”Ÿæˆ (src/tagging/worker.py)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ æ­Œæ›²å…ƒæ•°æ®    â”‚   â†’   â”‚ NVIDIA LLM   â”‚                   â”‚
â”‚  â”‚ (æ­Œå/æ­Œæ‰‹)   â”‚        â”‚ (Llama-3.3)  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                  â”‚                            â”‚
â”‚                                  â–¼                            â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                    â”‚  è¯­ä¹‰æ ‡ç­¾                 â”‚               â”‚
â”‚                    â”‚  mood, energy, genre... â”‚               â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              è¯­ä¹‰æ•°æ®åº“ (data/semantic.db)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ file_id | mood | energy | genre | region | ...       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ song_1  | Epic | High   | Rock  | Chinese | ...      â”‚   â”‚
â”‚  â”‚ song_2  | Sad  | Low    | Pop   | Western | ...      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ¨èå¼•æ“ (src/recommend/engine.py)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ æ’­æ”¾å†å²      â”‚ + â”‚ æ”¶è—åˆ—è¡¨      â”‚ + â”‚ ç”¨æˆ·æ­Œå•      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â†“                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                    â”‚ å³æ—¶æ„å»ºç”»åƒ  â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                           â”‚                                  â”‚
â”‚                           â–¼                                  â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                  â”‚  ç”¨æˆ·åå¥½å‘é‡    â”‚                         â”‚
â”‚                  â”‚  (å®æ—¶è®¡ç®—)     â”‚                         â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ ç”¨æˆ·ç”»åƒå‘é‡  â”‚   â†’   â”‚ æ­Œæ›²æ ‡ç­¾å‘é‡  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                            â†“                                 â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                  â”‚ Cosine Similarityâ”‚                        â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                           â”‚                                  â”‚
â”‚                           â–¼                                  â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                  â”‚  Top-N æ¨èåˆ—è¡¨   â”‚                        â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
semantune/
â”œâ”€â”€ main.py                    # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ .env.example              # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ settings.py           # æ•°æ®åº“è·¯å¾„ã€APIé…ç½®ç­‰
â”‚   â”œâ”€â”€ constants.py          # æ ‡ç­¾ç™½åå•ã€æç¤ºè¯æ¨¡æ¿ç­‰
â”‚   â”œâ”€â”€ recommend_config.yaml # æ¨èé…ç½®ï¼ˆYAMLï¼‰
â”‚   â””â”€â”€ tagging_config.yaml   # æ ‡ç­¾é…ç½®ï¼ˆYAMLï¼‰
â”œâ”€â”€ src/                      # æºä»£ç 
â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ database.py       # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ schema.py         # æ•°æ®åº“è¡¨ç»“æ„
â”‚   â”‚   â”œâ”€â”€ exceptions.py     # å¼‚å¸¸å®šä¹‰å’Œå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ cache.py          # ç¼“å­˜æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ config_validator.py # é…ç½®éªŒè¯å™¨
â”‚   â”‚   â”œâ”€â”€ response.py       # ç»Ÿä¸€å“åº”æ ¼å¼
â”‚   â”‚   â””â”€â”€ migration/        # æ•°æ®åº“è¿ç§»æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ manager.py    # è¿ç§»ç®¡ç†å™¨
â”‚   â”‚       â”œâ”€â”€ models.py     # è¿ç§»æ¨¡å‹
â”‚   â”‚       â””â”€â”€ migrations.py # è¿ç§»è„šæœ¬
â”‚   â”œâ”€â”€ repositories/         # Repository å±‚ï¼ˆæ•°æ®è®¿é—®ï¼‰
â”‚   â”‚   â”œâ”€â”€ user_repository.py      # ç”¨æˆ·æ•°æ®è®¿é—®
â”‚   â”‚   â”œâ”€â”€ semantic_repository.py  # è¯­ä¹‰æ ‡ç­¾æ•°æ®è®¿é—®ï¼ˆä¸»å…¥å£ï¼‰
â”‚   â”‚   â”œâ”€â”€ semantic_query.py       # è¯­ä¹‰æŸ¥è¯¢æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ semantic_stats.py       # è¯­ä¹‰ç»Ÿè®¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ navidrome_repository.py # Navidrome æ•°æ®è®¿é—®
â”‚   â”‚   â””â”€â”€ song_repository.py      # æ­Œæ›²æ•°æ®è®¿é—®
â”‚   â”œâ”€â”€ services/             # Service å±‚ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”œâ”€â”€ service_factory.py      # æœåŠ¡å·¥å‚ï¼ˆä¾èµ–æ³¨å…¥ï¼‰
â”‚   â”‚   â”œâ”€â”€ tagging_service.py      # æ ‡ç­¾ç”ŸæˆæœåŠ¡ï¼ˆä¸»å…¥å£ï¼‰
â”‚   â”‚   â”œâ”€â”€ llm_client.py           # LLM API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ recommend_service.py    # æ¨èæœåŠ¡ï¼ˆä¸»å…¥å£ï¼‰
â”‚   â”‚   â”œâ”€â”€ recommend_similarity.py # ç›¸ä¼¼åº¦è®¡ç®—æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ recommend_diversity.py  # å¤šæ ·æ€§æ§åˆ¶æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ profile_service.py      # ç”¨æˆ·ç”»åƒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ query_service.py        # æŸ¥è¯¢æœåŠ¡
â”‚   â”‚   â””â”€â”€ analyze_service.py      # åˆ†ææœåŠ¡
â”‚   â”œâ”€â”€ cli/                  # CLI å±‚ï¼ˆå‘½ä»¤è¡Œæ¥å£ï¼‰
â”‚   â”‚   â”œâ”€â”€ tagging_cli.py    # æ ‡ç­¾ç”Ÿæˆå‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ recommend_cli.py  # æ¨èå‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ query_cli.py      # æŸ¥è¯¢å‘½ä»¤
â”‚   â”‚   â””â”€â”€ analyze_cli.py    # åˆ†æå‘½ä»¤
â”‚   â”œâ”€â”€ api/                  # FastAPI æ¥å£
â”‚   â”‚   â”œâ”€â”€ app.py            # FastAPI ä¸»åº”ç”¨
â”‚   â”‚   â””â”€â”€ routes/           # API è·¯ç”±
â”‚   â”‚       â”œâ”€â”€ recommend/    # æ¨èæ¥å£æ¨¡å—
â”‚   â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚       â”‚   â”œâ”€â”€ endpoints.py # æ¨èç«¯ç‚¹
â”‚   â”‚       â”‚   â””â”€â”€ models.py  # æ¨èæ¨¡å‹
â”‚   â”‚       â”œâ”€â”€ tagging/      # æ ‡ç­¾æ¥å£æ¨¡å—
â”‚   â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚       â”‚   â”œâ”€â”€ endpoints.py # æ ‡ç­¾ç«¯ç‚¹
â”‚   â”‚       â”‚   â””â”€â”€ models.py  # æ ‡ç­¾æ¨¡å‹
â”‚   â”‚       â”œâ”€â”€ query.py      # æŸ¥è¯¢æ¥å£
â”‚   â”‚       â”œâ”€â”€ tagging.py    # æ ‡ç­¾ç”Ÿæˆæ¥å£ï¼ˆä¸»å…¥å£ï¼‰
â”‚   â”‚       â”œâ”€â”€ tagging_sse.py # SSE è¿›åº¦æµæ¨¡å—
â”‚   â”‚       â”œâ”€â”€ tagging_tasks.py # åå°ä»»åŠ¡æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ config.py     # é…ç½®æ¥å£ï¼ˆä¸»å…¥å£ï¼‰
â”‚   â”‚       â”œâ”€â”€ config_api.py # API é…ç½®ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ config_yaml.py # YAML é…ç½®ç®¡ç†
â”‚   â”‚       â””â”€â”€ analyze.py    # åˆ†ææ¥å£
â”‚   â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ common.py         # é€šç”¨å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ logger.py         # æ—¥å¿—é…ç½®
â”‚       â””â”€â”€ export.py         # æ•°æ®å¯¼å‡ºå·¥å…·
â”œâ”€â”€ frontend/                 # å‰ç«¯ç•Œé¢ï¼ˆReact + Vite + TypeScript + TailwindCSSï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/              # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ components/       # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Error.tsx     # é”™è¯¯ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout.tsx    # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ Loading.tsx   # åŠ è½½ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.tsx      # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Recommend.tsx # æ¨èé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Query.tsx     # æŸ¥è¯¢é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Tagging.tsx   # æ ‡ç­¾é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Analyze.tsx   # åˆ†æé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Settings.tsx  # è®¾ç½®é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ tagging/      # æ ‡ç­¾é¡µé¢å­ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TaggingConfig.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BatchTagging.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TagTest.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TaggingHeader.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TaggingTabs.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useTagging.tsx
â”‚   â”‚   â”‚   â””â”€â”€ settings/     # è®¾ç½®é¡µé¢å­ç»„ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ BasicConfig.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ AlgorithmConfigPanel.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ RecommendConfigPanel.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ TaggingConfigPanel.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ TagWeights.tsx
â”‚   â”‚   â”‚       â””â”€â”€ UserProfileConfigPanel.tsx
â”‚   â”‚   â”œâ”€â”€ types/            # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ App.tsx           # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.tsx          # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json          # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â””â”€â”€ vite.config.ts        # Vite é…ç½®
â”œâ”€â”€ data/                     # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ navidrome.db          # Navidrome æ•°æ®åº“ï¼ˆæ’­æ”¾å†å²ã€æ­Œå•ï¼‰
â”‚   â””â”€â”€ semantic.db           # è¯­ä¹‰æ ‡ç­¾æ•°æ®åº“
â”œâ”€â”€ logs/                     # æ—¥å¿—ç›®å½•
â”‚   â”œâ”€â”€ tagging_preview.log   # æ ‡ç­¾é¢„è§ˆæ—¥å¿—
â”‚   â”œâ”€â”€ worker.log            # æ ‡ç­¾ç”Ÿæˆæ—¥å¿—
â”‚   â”œâ”€â”€ recommend.log         # æ¨èå¼•æ“æ—¥å¿—
â”‚   â”œâ”€â”€ query.log             # æŸ¥è¯¢å·¥å…·æ—¥å¿—
â”‚   â”œâ”€â”€ profile.log           # ç”¨æˆ·ç”»åƒæ—¥å¿—
â”‚   â”œâ”€â”€ export.log            # æ•°æ®å¯¼å‡ºæ—¥å¿—
â”‚   â””â”€â”€ analyze.log           # æ•°æ®åˆ†ææ—¥å¿—
â”œâ”€â”€ exports/                  # å¯¼å‡ºç›®å½•
â”‚   â””â”€â”€ export_<user>_<timestamp>/  # ç”¨æˆ·æ•°æ®å¯¼å‡º
â”œâ”€â”€ tests/                    # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ conftest.py           # pytest é…ç½®å’Œå…±äº« fixtures
â”‚   â”œâ”€â”€ unit/                 # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_common.py    # æµ‹è¯•é€šç”¨å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ test_config_validator.py  # æµ‹è¯•é…ç½®éªŒè¯æ¨¡å—
â”‚   â”‚   â””â”€â”€ test_tagging_service.py   # æµ‹è¯•æ ‡ç­¾æœåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ integration/          # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ README.md             # æµ‹è¯•æ–‡æ¡£
â””â”€â”€ README.md                 # æœ¬æ–‡æ¡£
```

### æ¶æ„è¯´æ˜

é¡¹ç›®é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   CLI Layer  â”‚              â”‚  API Layer   â”‚            â”‚
â”‚  â”‚  (main.py)   â”‚              â”‚  (FastAPI)   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                              â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Service Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Tagging      â”‚  â”‚ Recommend    â”‚  â”‚ Profile      â”‚     â”‚
â”‚  â”‚ Service      â”‚  â”‚ Service      â”‚  â”‚ Service      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ Query        â”‚  â”‚ Analyze      â”‚                        â”‚
â”‚  â”‚ Service      â”‚  â”‚ Service      â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Repository Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ User         â”‚  â”‚ Semantic     â”‚  â”‚ Navidrome    â”‚     â”‚
â”‚  â”‚ Repository   â”‚  â”‚ Repository   â”‚  â”‚ Repository   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ Song         â”‚                                           â”‚
â”‚  â”‚ Repository   â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Core Layer                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Database     â”‚  â”‚ Cache        â”‚  â”‚ Response     â”‚     â”‚
â”‚  â”‚ Manager      â”‚  â”‚ Manager      â”‚  â”‚ Formatter    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ Config       â”‚  â”‚ Migration    â”‚                        â”‚
â”‚  â”‚ Validator    â”‚  â”‚ Manager      â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Database Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ navidrome.db â”‚              â”‚ semantic.db  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å„å±‚èŒè´£**ï¼š
- **CLI/API Layer**: å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œå‚æ•°éªŒè¯ï¼Œè°ƒç”¨ Service å±‚
- **Service Layer**: å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œåè°ƒå¤šä¸ª Repository
- **Repository Layer**: å°è£…æ•°æ®è®¿é—®é€»è¾‘ï¼Œä¸æ•°æ®åº“äº¤äº’
- **Core Layer**: æä¾›æ•°æ®åº“è¿æ¥ã€ç¼“å­˜ã€é…ç½®éªŒè¯ã€å“åº”æ ¼å¼åŒ–ã€æ•°æ®åº“è¿ç§»ç­‰æ ¸å¿ƒåŠŸèƒ½
- **Database Layer**: SQLite æ•°æ®åº“å­˜å‚¨

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

1. **Python 3.8+**
2. **Node.js 16+** - ç”¨äºè¿è¡Œå‰ç«¯ç•Œé¢
3. **NVIDIA API Key** - ç”¨äºè°ƒç”¨ LLM æœåŠ¡
4. **Navidrome** - éŸ³ä¹æœåŠ¡å™¨ï¼ˆå·²å®‰è£…å¹¶æœ‰æ’­æ”¾æ•°æ®ï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <your-repo-url>
   cd semantune
   ```

2. **å®‰è£…åç«¯ä¾èµ–**
   ```bash
   pip install requests
   ```

3. **å®‰è£…å‰ç«¯ä¾èµ–**
   ```bash
   cd frontend
   npm install
   cd ..
   ```

4. **é…ç½® API Key**
   
   å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶é…ç½®ï¼š
   ```bash
   cp .env.example .env
   ```
   
   ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œè®¾ç½®ä½ çš„ NVIDIA API Keyï¼š
   ```bash
   SEMANTUNE_API_KEY=your-api-key-here
   ```

### å¯åŠ¨æœåŠ¡

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Web ç•Œé¢ï¼ˆæ¨èï¼‰

1. **å¯åŠ¨åç«¯ API æœåŠ¡**
   ```bash
   python main.py api --host 0.0.0.0 --port 8080
   ```

2. **å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨**ï¼ˆæ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼‰
   ```bash
   cd frontend
   npm run dev
   ```

3. **è®¿é—® Web ç•Œé¢**
   
   æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:3000`

#### æ–¹å¼äºŒï¼šä½¿ç”¨å‘½ä»¤è¡Œ

```bash
# ç”Ÿæˆè¯­ä¹‰æ ‡ç­¾
python main.py tag

# ç”Ÿæˆæ¨è
python main.py recommend

# æŸ¥è¯¢æ­Œæ›²
python main.py query

# åˆ†ææ•°æ®
python main.py analyze

# å¯¼å‡ºæ•°æ®
python main.py export
```

---

## ğŸ“Š ä½¿ç”¨æµç¨‹

### é˜¶æ®µ 1ï¸âƒ£ï¼šç”Ÿæˆè¯­ä¹‰æ ‡ç­¾

ä¸ºéŸ³ä¹åº“ä¸­çš„æ‰€æœ‰æ­Œæ›²ç”Ÿæˆè¯­ä¹‰æ ‡ç­¾ã€‚

```bash
python main.py tag
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
ğŸµ Processing 19700 new songs. (Total in Library: 19700)
è¿›åº¦:[1/19700] ETA:15:23:45 | å‘¨æ°ä¼¦ - å¤œæ›²
```

**å¤„ç†æ—¶é—´**ï¼šçº¦ 2-3 ç§’/é¦–æ­Œï¼ˆä½¿ç”¨ Llama-3.3-70Bï¼‰

**ç”Ÿæˆçš„æ ‡ç­¾**ï¼š
- `mood`: Energetic, Epic, Emotional, Sad, Chill, Dark, Happy, Peaceful, Romantic, Dreamy, Upbeat, Groovy
- `energy`: Low, Medium, High
- `genre`: Pop, Indie, Rock, Electronic, Hip-Hop, Classical, Folk, J-Rock, Metal
- `region`: Chinese, Western, Japanese, Korean
- `subculture`: None, Anime, Game, Vocaloid, Idol
- `scene`: Workout, Study, Night, Driving, Gaming, Sleep, Morning, None

---

### é˜¶æ®µ 2ï¸âƒ£ï¼šæ•°æ®è´¨é‡åˆ†æ

æ£€æŸ¥ç”Ÿæˆçš„æ ‡ç­¾è´¨é‡ã€‚

```bash
python main.py analyze
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
================================================================================
  æ•°æ®è´¨é‡
================================================================================
  æ€»æ­Œæ›²æ•°: 19700
  å¹³å‡ç½®ä¿¡åº¦: 0.82
  ä½ç½®ä¿¡åº¦æ­Œæ›² (<0.5): 0 (0.0%)

æƒ…ç»ª (Mood) åˆ†å¸ƒ:
æ ‡ç­¾              æ•°é‡       å æ¯”
-----------------------------------
Energetic         3200      16.24%
Peaceful          2800      14.21%
...
```

---

### é˜¶æ®µ 3ï¸âƒ£ï¼šç”Ÿæˆä¸ªæ€§åŒ–æ¨è

åŸºäºç”¨æˆ·ç”»åƒç”Ÿæˆæ¨èåˆ—è¡¨ã€‚

```bash
python main.py recommend
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
================================================================================
  ä¸ªæ€§åŒ–éŸ³ä¹æ¨èç³»ç»Ÿ
================================================================================
1. åŠ è½½ç”¨æˆ·ç”»åƒ...
   ç”¨æˆ·ID: user_123
   ç”»åƒç»´åº¦: 12 ä¸ªæ ‡ç­¾
2. è·å–ç”¨æˆ·å†å²...
   å·²å¬è¿‡: 1523 é¦–
   æœ€è¿‘å¬è¿‡: 100 é¦–
3. æ„å»ºæ­Œæ›²å‘é‡åº“...
   æ­Œæ›²æ€»æ•°: 19700 é¦–
4. è®¡ç®—åŠ æƒç›¸ä¼¼åº¦...
   å€™é€‰æ­Œæ›²: 18177 é¦–
   ç›¸ä¼¼åº¦èŒƒå›´: 0.856 ~ 0.123
5. æ··åˆæ¨èç­–ç•¥...
   åˆ©ç”¨å‹ï¼ˆé«˜ç›¸ä¼¼åº¦ï¼‰: 22 é¦–
   æ¢ç´¢å‹ï¼ˆå¤šæ ·æ€§ï¼‰: 8 é¦–
   æœ€ç»ˆæ¨è: 30 é¦–
   ç‹¬ç«‹è‰ºäººæ•°: 28
   ç‹¬ç«‹ä¸“è¾‘æ•°: 30

================================================================================
  ä¸ºä½ æ¨è (å…± 30 é¦–)
================================================================================
#    ç›¸ä¼¼åº¦    æ­Œæ‰‹                 æ­Œæ›²                           æ ‡ç­¾
--------------------------------------------------------------------------------
1    0.856    Coldplay            Yellow                         Peaceful/Low/Rock
2    0.842    Radiohead           Creep                          Sad/Medium/Rock
...
```

---

### é˜¶æ®µ 4ï¸âƒ£ï¼šæŸ¥è¯¢æ­Œæ›²

æŒ‰æ ‡ç­¾æŸ¥è¯¢æ­Œæ›²ã€‚

```bash
python main.py query
```

**äº¤äº’å¼èœå•**ï¼š
```
================================================================================
  è¯­ä¹‰æ ‡ç­¾æŸ¥è¯¢å·¥å…·
================================================================================
  1. æŒ‰æƒ…ç»ªæŸ¥è¯¢ (Mood)
  2. æŒ‰æ ‡ç­¾ç»„åˆæŸ¥è¯¢ (Mood + Energy + Genre + Region)
  3. æŒ‰åœºæ™¯æŸ¥è¯¢ (é¢„è®¾åœºæ™¯)
  4. æ‰¾ç›¸ä¼¼æ­Œæ›²
  5. éšæœºæ¨è
  6. å¯¼å‡ºä¸Šæ¬¡æŸ¥è¯¢ç»“æœ
  0. é€€å‡º
================================================================================
```

---

### é˜¶æ®µ 5ï¸âƒ£ï¼šå¯¼å‡ºæ•°æ®

å¯¼å‡ºç”¨æˆ·æ•°æ®ã€æ’­æ”¾å†å²ã€æ­Œå•ç­‰ã€‚

```bash
python main.py export
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
================================================================================
  ç”¨æˆ·æ•°æ®å¯¼å‡ºå·¥å…·
================================================================================

å¯¼å‡ºç›®å½•: exports/export_user_20260201_120000

1. å¯¼å‡ºæ’­æ”¾å†å²...
   å·²å¯¼å‡º 1523 é¦–æ­Œæ›²
2. å¯¼å‡ºæ­Œå•...
   å·²å¯¼å‡º 12 ä¸ªæ­Œå•
3. å¯¼å‡ºç»Ÿè®¡æ•°æ®...
   æ€»æ­Œæ›²æ•°: 1523
   æ€»æ’­æ”¾æ¬¡æ•°: 12456
   æ”¶è—æ­Œæ›²æ•°: 234
   æ­Œå•æ•°é‡: 12

âœ… å¯¼å‡ºå®Œæˆï¼
   æ‰€æœ‰æ–‡ä»¶å·²ä¿å­˜åˆ°: exports/export_user_20260201_120000
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### æ¨èé…ç½®

æ¨èé…ç½®æ”¯æŒä¸¤ç§æ–¹å¼ï¼š

#### æ–¹å¼ä¸€ï¼šYAML é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰

ç¼–è¾‘ [`config/recommend_config.yaml`](config/recommend_config.yaml:1)ï¼š

```yaml
recommend:
  default_limit: 30                # é»˜è®¤æ¨èæ•°é‡
  recent_filter_count: 100         # è¿‡æ»¤æœ€è¿‘å¬è¿‡çš„ N é¦–æ­Œ
  diversity_max_per_artist: 2      # æ¯ä¸ªæ­Œæ‰‹æœ€å¤šæ¨è N é¦–
  diversity_max_per_album: 1       # æ¯å¼ ä¸“è¾‘æœ€å¤šæ¨è N é¦–
  exploration_ratio: 0.25          # æ¢ç´¢å‹æ­Œæ›²å æ¯”ï¼ˆ25%ï¼‰
  tag_weights:                     # æ ‡ç­¾æƒé‡
    mood: 2.0                      # æƒ…ç»ªæœ€é‡è¦
    energy: 1.5                    # èƒ½é‡æ¬¡ä¹‹
    genre: 1.2                     # æµæ´¾
    region: 0.8                    # åœ°åŒºæƒé‡è¾ƒä½
```

#### æ–¹å¼äºŒï¼šPython é…ç½®æ–‡ä»¶

ç¼–è¾‘ [`config/settings.py`](config/settings.py:1) ä¸­çš„ `RECOMMEND_CONFIG`ï¼š

```python
RECOMMEND_CONFIG = {
    "default_limit": 30,                # é»˜è®¤æ¨èæ•°é‡
    "recent_filter_count": 100,         # è¿‡æ»¤æœ€è¿‘å¬è¿‡çš„ N é¦–æ­Œ
    "diversity_max_per_artist": 2,      # æ¯ä¸ªæ­Œæ‰‹æœ€å¤šæ¨è N é¦–
    "diversity_max_per_album": 1,       # æ¯å¼ ä¸“è¾‘æœ€å¤šæ¨è N é¦–
    "exploration_ratio": 0.25,          # æ¢ç´¢å‹æ­Œæ›²å æ¯”ï¼ˆ25%ï¼‰
    "tag_weights": {                    # æ ‡ç­¾æƒé‡
        "mood": 2.0,                    # æƒ…ç»ªæœ€é‡è¦
        "energy": 1.5,                  # èƒ½é‡æ¬¡ä¹‹
        "genre": 1.2,                   # æµæ´¾
        "region": 0.8                   # åœ°åŒºæƒé‡è¾ƒä½
    }
}
```

### æ ‡ç­¾é…ç½®

ç¼–è¾‘ [`config/tagging_config.yaml`](config/tagging_config.yaml:1)ï¼š

```yaml
tagging:
  batch_size: 10               # æ‰¹é‡å¤„ç†å¤§å°
  max_retries: 3               # æœ€å¤§é‡è¯•æ¬¡æ•°
  timeout: 30                  # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  confidence_threshold: 0.5    # ç½®ä¿¡åº¦é˜ˆå€¼
```

### ç”¨æˆ·ç”»åƒæƒé‡é…ç½®

ç¼–è¾‘ [`config/settings.py`](config/settings.py:1) ä¸­çš„ `WEIGHT_CONFIG`ï¼š

```python
WEIGHT_CONFIG = {
    "play_count": 1.0,      # æ¯æ¬¡æ’­æ”¾çš„åŸºç¡€æƒé‡
    "starred": 10.0,        # æ”¶è—çš„å›ºå®šåŠ åˆ†
    "in_playlist": 8.0,     # æ¯ä¸ªæ­Œå•çš„åŠ åˆ†
    "time_decay_days": 90,  # æ—¶é—´è¡°å‡å‘¨æœŸï¼ˆå¤©ï¼‰
    "min_decay": 0.3        # æœ€å°è¡°å‡ç³»æ•°
}
```

---

## ğŸ“ å‘½ä»¤è¡Œå‚æ•°

```bash
python main.py <command>

å¯ç”¨å‘½ä»¤:
  tag          ç”Ÿæˆè¯­ä¹‰æ ‡ç­¾
  tag-preview  é¢„è§ˆæ ‡ç­¾ç”Ÿæˆï¼ˆæµ‹è¯• APIï¼‰
  recommend    ç”Ÿæˆä¸ªæ€§åŒ–æ¨èï¼ˆç”¨æˆ·ç”»åƒå³æ—¶æ„å»ºï¼‰
  query        æŸ¥è¯¢æ­Œæ›²
  analyze      åˆ†ææ•°æ®
  export       å¯¼å‡ºæ•°æ®
  api          å¯åŠ¨ API æœåŠ¡
```

**æ³¨æ„**ï¼šç”¨æˆ·ç”»åƒç°åœ¨åœ¨æ¨èæ—¶å³æ—¶æ„å»ºï¼Œæ— éœ€å•ç‹¬è¿è¡Œ `profile` å‘½ä»¤ã€‚

---

## ğŸŒ API æœåŠ¡

### å¯åŠ¨ API æœåŠ¡

```bash
# å¯åŠ¨ API æœåŠ¡ï¼ˆé»˜è®¤ç«¯å£ 8000ï¼‰
python main.py api

# æŒ‡å®šç«¯å£
python main.py api --port 8080

# æŒ‡å®šç›‘å¬åœ°å€
python main.py api --host 127.0.0.1 --port 8080
```

å¯åŠ¨åè®¿é—®ï¼š
- API æ–‡æ¡£: http://localhost:8000/docs
- ReDoc æ–‡æ¡£: http://localhost:8000/redoc
- å¥åº·æ£€æŸ¥: http://localhost:8000/health

### API ç«¯ç‚¹

#### æ¨èæ¥å£ (`/api/v1/recommend`)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| POST | `/` | è·å–ä¸ªæ€§åŒ–æ¨è |
| GET | `/users` | è·å–æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨ |

**æ¨èè¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "user_id": "user_123",
  "limit": 30,
  "filter_recent": true,
  "diversity": true
}
```

#### æŸ¥è¯¢æ¥å£ (`/api/v1/query`)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| POST | `/mood` | æŒ‰æƒ…ç»ªæŸ¥è¯¢æ­Œæ›² |
| POST | `/tags` | æŒ‰æ ‡ç­¾ç»„åˆæŸ¥è¯¢æ­Œæ›² |
| POST | `/scene` | æŒ‰é¢„è®¾åœºæ™¯æŸ¥è¯¢æ­Œæ›² |
| POST | `/similar` | æ‰¾ç›¸ä¼¼æ­Œæ›² |
| POST | `/random` | éšæœºæ¨èæ­Œæ›² |
| GET | `/labels` | è·å–æ‰€æœ‰å¯ç”¨æ ‡ç­¾åˆ—è¡¨ |

**æŒ‰æƒ…ç»ªæŸ¥è¯¢ç¤ºä¾‹**ï¼š
```json
{
  "mood": "Energetic",
  "limit": 20
}
```

#### æ ‡ç­¾ç”Ÿæˆæ¥å£ (`/api/v1/tagging`)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| POST | `/generate` | ä¸ºå•é¦–æ­Œæ›²ç”Ÿæˆè¯­ä¹‰æ ‡ç­¾ |
| POST | `/batch` | æ‰¹é‡ç”Ÿæˆè¯­ä¹‰æ ‡ç­¾ï¼ˆåå°ä»»åŠ¡ï¼‰ |
| GET | `/progress` | è·å–æ‰¹é‡æ ‡ç­¾ç”Ÿæˆè¿›åº¦ |
| POST | `/sync` | åŒæ­¥æ ‡ç­¾åˆ°æ•°æ®åº“ |

**ç”Ÿæˆæ ‡ç­¾ç¤ºä¾‹**ï¼š
```json
{
  "title": "å¤œæ›²",
  "artist": "å‘¨æ°ä¼¦",
  "album": "åä¸€æœˆçš„è§é‚¦"
}
```

#### åˆ†ææ¥å£ (`/api/v1/analyze`)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| GET | `/distribution/{field}` | è·å–æŒ‡å®šå­—æ®µçš„åˆ†å¸ƒåˆ†æ |
| GET | `/combinations` | è·å–æœ€å¸¸è§çš„ Mood + Energy ç»„åˆ |
| GET | `/region-genre` | è·å–å„åœ°åŒºçš„æµæ´¾åˆ†å¸ƒ |
| GET | `/quality` | è·å–æ•°æ®è´¨é‡åˆ†æ |
| GET | `/summary` | è·å–æ•°æ®æ¦‚è§ˆ |

### ä¾èµ–å®‰è£…

API æœåŠ¡éœ€è¦å®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š

```bash
pip install fastapi uvicorn python-dotenv
```

---

## ğŸ¨ å‰ç«¯ç•Œé¢

é¡¹ç›®åŒ…å«ä¸€ä¸ªåŸºäº React + Vite + TypeScript + TailwindCSS çš„ Web å‰ç«¯ç•Œé¢ã€‚

### å‰ç«¯æŠ€æœ¯æ ˆ

- **React 18** - UI æ¡†æ¶
- **Vite** - æ„å»ºå·¥å…·
- **TypeScript** - ç±»å‹å®‰å…¨
- **TailwindCSS** - CSS æ¡†æ¶
- **React Router** - è·¯ç”±ç®¡ç†
- **Axios** - HTTP å®¢æˆ·ç«¯
- **Lucide React** - å›¾æ ‡åº“

### å‰ç«¯é¡µé¢

| é¡µé¢ | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| é¦–é¡µ | `/` | æ˜¾ç¤ºç³»ç»Ÿæ¦‚è§ˆå’Œç»Ÿè®¡æ•°æ® |
| æ¨è | `/recommend` | è·å–ä¸ªæ€§åŒ–éŸ³ä¹æ¨è |
| æŸ¥è¯¢ | `/query` | æ ¹æ®è¯­ä¹‰æ ‡ç­¾æœç´¢æ­Œæ›² |
| æ ‡ç­¾ç”Ÿæˆ | `/tagging` | ç®¡ç†è¯­ä¹‰æ ‡ç­¾ç”Ÿæˆä»»åŠ¡ |
| åˆ†æ | `/analyze` | æŸ¥çœ‹è¯¦ç»†çš„æ•°æ®åˆ†æ |
| è®¾ç½® | `/settings` | ç³»ç»Ÿé…ç½®ç®¡ç† |

### å‰ç«¯å¼€å‘

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview
```

å‰ç«¯å¼€å‘æœåŠ¡å™¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨ï¼Œå¹¶è‡ªåŠ¨ä»£ç† API è¯·æ±‚åˆ°åç«¯æœåŠ¡ã€‚

è¯¦ç»†çš„å‰ç«¯æ–‡æ¡£è¯·å‚è€ƒ [`frontend/README.md`](frontend/README.md:1)ã€‚

---

## ğŸ§ª æµ‹è¯•

é¡¹ç›®ä½¿ç”¨ pytest ä½œä¸ºæµ‹è¯•æ¡†æ¶ï¼ŒåŒ…å«å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/unit/

# æ˜¾ç¤ºè¯¦ç»†è¾“å‡º
pytest -v

# æ˜¾ç¤ºæµ‹è¯•è¦†ç›–ç‡
pytest --cov=src --cov-report=html
```

è¦†ç›–ç‡æŠ¥å‘Šå°†ç”Ÿæˆåœ¨ `htmlcov/` ç›®å½•ä¸­ã€‚

### æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ conftest.py              # pytest é…ç½®å’Œå…±äº« fixtures
â”œâ”€â”€ unit/                    # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ test_common.py       # æµ‹è¯•é€šç”¨å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ test_config_validator.py  # æµ‹è¯•é…ç½®éªŒè¯æ¨¡å—
â”‚   â””â”€â”€ test_tagging_service.py   # æµ‹è¯•æ ‡ç­¾æœåŠ¡æ¨¡å—
â”œâ”€â”€ integration/             # é›†æˆæµ‹è¯•
â””â”€â”€ README.md                # æµ‹è¯•æ–‡æ¡£
```

### æµ‹è¯•è¦†ç›–ç‡

- [`src/utils/common.py`](src/utils/common.py:1): 100%
- [`src/services/tagging_service.py`](src/services/tagging_service.py:1): 100%
- [`src/core/config_validator.py`](src/core/config_validator.py:1): 88%

è¯¦ç»†çš„æµ‹è¯•æ–‡æ¡£è¯·å‚è€ƒ [`tests/README.md`](tests/README.md:1)ã€‚

---

## ğŸ”§ å¼€å‘è¯´æ˜

### æ¨¡å—è¯´æ˜

| å±‚çº§ | æ¨¡å— | æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|------|------|
| **æ ¸å¿ƒæ¨¡å—** | Database | [`src/core/database.py`](src/core/database.py:1) | æ•°æ®åº“è¿æ¥å’Œä¸Šä¸‹æ–‡ç®¡ç†å™¨ |
| | Schema | [`src/core/schema.py`](src/core/schema.py:1) | æ•°æ®åº“è¡¨ç»“æ„å®šä¹‰ |
| | Exceptions | [`src/core/exceptions.py`](src/core/exceptions.py:1) | å¼‚å¸¸å®šä¹‰å’Œå…¨å±€å¤„ç†å™¨ |
| | Cache | [`src/core/cache.py`](src/core/cache.py:1) | ç¼“å­˜ç®¡ç†å™¨ |
| | Config Validator | [`src/core/config_validator.py`](src/core/config_validator.py:1) | é…ç½®éªŒè¯å™¨ |
| | Response | [`src/core/response.py`](src/core/response.py:1) | ç»Ÿä¸€å“åº”æ ¼å¼ |
| | Migration Manager | [`src/core/migration/manager.py`](src/core/migration/manager.py:1) | æ•°æ®åº“è¿ç§»ç®¡ç†å™¨ |
| | Migration Models | [`src/core/migration/models.py`](src/core/migration/models.py:1) | è¿ç§»æ¨¡å‹å®šä¹‰ |
| **Repository å±‚** | User Repository | [`src/repositories/user_repository.py`](src/repositories/user_repository.py:1) | ç”¨æˆ·æ•°æ®è®¿é—® |
| | Semantic Repository | [`src/repositories/semantic_repository.py`](src/repositories/semantic_repository.py:1) | è¯­ä¹‰æ ‡ç­¾æ•°æ®è®¿é—® |
| | Navidrome Repository | [`src/repositories/navidrome_repository.py`](src/repositories/navidrome_repository.py:1) | Navidrome æ•°æ®è®¿é—® |
| | Song Repository | [`src/repositories/song_repository.py`](src/repositories/song_repository.py:1) | æ­Œæ›²æ•°æ®è®¿é—® |
| **Service å±‚** | Service Factory | [`src/services/service_factory.py`](src/services/service_factory.py:1) | æœåŠ¡å·¥å‚ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ |
| | Tagging Service | [`src/services/tagging_service.py`](src/services/tagging_service.py:1) | æ ‡ç­¾ç”Ÿæˆä¸šåŠ¡é€»è¾‘ |
| | Recommend Service | [`src/services/recommend_service.py`](src/services/recommend_service.py:1) | æ¨èç®—æ³•å®ç° |
| | Recommend Similarity | [`src/services/recommend_similarity.py`](src/services/recommend_similarity.py:1) | ç›¸ä¼¼åº¦è®¡ç®—æ¨¡å— |
| | Recommend Diversity | [`src/services/recommend_diversity.py`](src/services/recommend_diversity.py:1) | å¤šæ ·æ€§æ§åˆ¶æ¨¡å— |
| | Profile Service | [`src/services/profile_service.py`](src/services/profile_service.py:1) | ç”¨æˆ·ç”»åƒæ„å»º |
| | Query Service | [`src/services/query_service.py`](src/services/query_service.py:1) | æŸ¥è¯¢ä¸šåŠ¡é€»è¾‘ |
| | Analyze Service | [`src/services/analyze_service.py`](src/services/analyze_service.py:1) | åˆ†æä¸šåŠ¡é€»è¾‘ |
| **CLI å±‚** | Tagging CLI | [`src/cli/tagging_cli.py`](src/cli/tagging_cli.py:1) | æ ‡ç­¾ç”Ÿæˆå‘½ä»¤ |
| | Recommend CLI | [`src/cli/recommend_cli.py`](src/cli/recommend_cli.py:1) | æ¨èå‘½ä»¤ |
| | Query CLI | [`src/cli/query_cli.py`](src/cli/query_cli.py:1) | æŸ¥è¯¢å‘½ä»¤ |
| | Analyze CLI | [`src/cli/analyze_cli.py`](src/cli/analyze_cli.py:1) | åˆ†æå‘½ä»¤ |
| **API å±‚** | FastAPI App | [`src/api/app.py`](src/api/app.py:1) | FastAPI ä¸»åº”ç”¨ |
| | Recommend Routes | [`src/api/routes/recommend/`](src/api/routes/recommend/) | æ¨èæ¥å£æ¨¡å— |
| | Tagging Routes | [`src/api/routes/tagging/`](src/api/routes/tagging/) | æ ‡ç­¾æ¥å£æ¨¡å— |
| | Query Routes | [`src/api/routes/query.py`](src/api/routes/query.py:1) | æŸ¥è¯¢æ¥å£ |
| | Tagging SSE | [`src/api/routes/tagging_sse.py`](src/api/routes/tagging_sse.py:1) | SSE è¿›åº¦æµæ¨¡å— |
| | Tagging Tasks | [`src/api/routes/tagging_tasks.py`](src/api/routes/tagging_tasks.py:1) | åå°ä»»åŠ¡æ¨¡å— |
| | Config Routes | [`src/api/routes/config.py`](src/api/routes/config.py:1) | é…ç½®æ¥å£ï¼ˆä¸»å…¥å£ï¼‰ |
| | Config API | [`src/api/routes/config_api.py`](src/api/routes/config_api.py:1) | API é…ç½®ç®¡ç† |
| | Config YAML | [`src/api/routes/config_yaml.py`](src/api/routes/config_yaml.py:1) | YAML é…ç½®ç®¡ç† |
| | Analyze Routes | [`src/api/routes/analyze.py`](src/api/routes/analyze.py:1) | åˆ†ææ¥å£ |
| **å·¥å…·å‡½æ•°** | Common Utils | [`src/utils/common.py`](src/utils/common.py:1) | é€šç”¨å·¥å…·å‡½æ•° |
| | Logger | [`src/utils/logger.py`](src/utils/logger.py:1) | æ—¥å¿—é…ç½® |
| | Export | [`src/utils/export.py`](src/utils/export.py:1) | æ•°æ®å¯¼å‡ºå·¥å…· |

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨å¯¹åº”çš„æ¨¡å—ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶
2. åœ¨ [`main.py`](main.py:1) ä¸­æ·»åŠ æ–°çš„å‘½ä»¤å¤„ç†
3. æ›´æ–°æœ¬ README æ–‡æ¡£

---

## ğŸš€ é‡Œç¨‹ç¢‘

### v1.5.0 (å½“å‰ç‰ˆæœ¬)
- âœ… åŸºç¡€è¯­ä¹‰æ ‡ç­¾ç”ŸæˆåŠŸèƒ½
- âœ… ç”¨æˆ·ç”»åƒå³æ—¶æ„å»º
- âœ… ä¸ªæ€§åŒ–æ¨èå¼•æ“
- âœ… FastAPI RESTful æ¥å£
- âœ… React + TypeScript å‰ç«¯ç•Œé¢
- âœ… æ ‡ç­¾æŸ¥è¯¢å’Œåˆ†æå·¥å…·
- âœ… æ•°æ®å¯¼å‡ºåŠŸèƒ½
- âœ… ç¼“å­˜æ¨¡å—
- âœ… é…ç½®éªŒè¯å™¨
- âœ… æ•°æ®åº“è¿ç§»æ¨¡å—
- âœ… ç»Ÿä¸€å“åº”æ ¼å¼
- âœ… YAML é…ç½®æ–‡ä»¶æ”¯æŒ
- âœ… API è·¯ç”±æ¨¡å—åŒ–

### v1.6.0 (è®¡åˆ’ä¸­)
- ğŸ”„ å¹¶å‘æ ‡ç­¾ç”Ÿæˆä¼˜åŒ–
- ğŸ”„ API è®¤è¯æœºåˆ¶
- ğŸ”„ æ¨èç»“æœç¼“å­˜
- ğŸ”„ æ›´å¤šæ¨èç®—æ³•é€‰é¡¹

### v2.0.0 (æœªæ¥è§„åˆ’)
- ğŸ“‹ æ”¯æŒå¤šç§ LLM æä¾›å•†
- ğŸ“‹ å®æ—¶æ¨èæµ
- ğŸ“‹ ç”¨æˆ·åé¦ˆå­¦ä¹ 
- ğŸ“‹ å¤šè¯­è¨€æ”¯æŒ

---

## ğŸ“‹ å¾…åŠäº‹é¡¹

### é«˜ä¼˜å…ˆçº§
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- [ ] æ·»åŠ  API è°ƒç”¨é‡è¯•æœºåˆ¶
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆæ ‡ç­¾ç”Ÿæˆå¹¶å‘å¤„ç†ï¼‰

### ä¸­ä¼˜å…ˆçº§
- [ ] æ·»åŠ å‰ç«¯é”™è¯¯è¾¹ç•Œç»„ä»¶
- [ ] æ·»åŠ ä»£ç æ ¼å¼åŒ–é…ç½®ï¼ˆblackã€isortï¼‰
- [ ] æ·»åŠ ç±»å‹æ³¨è§£ï¼ˆmypyï¼‰
- [ ] æ·»åŠ ç¼“å­˜æœºåˆ¶ï¼ˆRedisï¼‰

### ä½ä¼˜å…ˆçº§
- [ ] Docker å®¹å™¨åŒ–éƒ¨ç½²
- [ ] CI/CD æµæ°´çº¿é…ç½®
- [ ] å¤šè¯­è¨€å›½é™…åŒ–
- [ ] ç§»åŠ¨ç«¯é€‚é…

---

## ğŸ”’ å®‰å…¨æ€§è¯´æ˜

- **API Key å®‰å…¨**ï¼šAPI Key é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼Œä¸ä¼šæäº¤åˆ°ä»£ç ä»“åº“
- **SQL æ³¨å…¥é˜²æŠ¤**ï¼šæ‰€æœ‰æ•°æ®åº“æŸ¥è¯¢ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- **è¾“å…¥éªŒè¯**ï¼šæ‰€æœ‰ API ç«¯ç‚¹ä½¿ç”¨ Pydantic è¿›è¡Œå‚æ•°éªŒè¯
- **è¿æ¥ç®¡ç†**ï¼šä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨é˜²æ­¢æ•°æ®åº“è¿æ¥æ³„æ¼
- **å¼‚å¸¸å¤„ç†**ï¼šä½¿ç”¨å…·ä½“çš„å¼‚å¸¸ç±»å‹ï¼Œé¿å…è£¸ except æ•è·
- **CORS é…ç½®**ï¼šç”Ÿäº§ç¯å¢ƒè¯·é…ç½®å…·ä½“çš„å…è®¸åŸŸå

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
