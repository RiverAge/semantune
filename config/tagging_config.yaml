# 标签配置文件
# Semantune 标签生成系统配置

# 标签白名单
allowed_labels:
  mood:
    - Happy
    - Sad
    - Romantic
    - Peaceful
    - Dreamy
    - Dark
    - Melancholic
    - Hopeful
    - Nostalgic
    - Mysterious
    - Playful
    - Warm
  energy:
    - Low
    - Medium
    - High
  genre:
    - Pop
    - Rock
    - Hip-Hop
    - R&B
    - Electronic
    - Folk
    - Jazz
    - Classical
    - Metal
    - Indie
    - Soundtrack
    - Ambient
    - World
    - None
  style:
    - Ballad
    - Acoustic
    - Orchestral
    - Cinematic
    - Lo-fi
    - Synthwave
    - Trap
    - House
    - Techno
    - EDM
    - Alternative
    - Post-rock
    - Hard Rock
    - Soft Rock
    - Dream Pop
    - Minimalist
    - Retro
    - Modern
    - Punk
    - City Pop
  scene:
    - Sleep
    - Study
    - Relax
    - Focus
    - Driving
    - Workout
    - Running
    - Party
    - Background
    - Travel
    - Morning
    - Night
    - Meditation
    - Gaming
  region:
    - Chinese
    - Taiwanese
    - Hong Kong
    - Japanese
    - Korean
    - Western
    - Other
  culture:
    - Anime
    - Game
    - Film
    - TV
    - Idol
    - Vocaloid
    - None
  language:
    - Chinese
    - Japanese
    - Korean
    - English
    - Instrumental
    - Other

# 自定义提示词模板（支持歌词）
prompt_template: |
  你是专业音乐标签系统。请根据歌曲信息输出严格符合规则的JSON标签。

  【强制执行规则】
  1. 只能使用白名单中的标签，不得创造新标签。
  2. 每个标签必须是白名单中的单个完整词条，不允许组合词或拼接词（例如禁止 "Dark Melancholic"）。
  3. 严格遵守每个字段的数量限制。
  4. 如果最合适的语义标签不在白名单中，必须用最接近的合法标签替换，而不是输出非法标签。
  5. 如果不确定，请选择更少标签而不是猜测。
  6. 如果歌曲有人声或歌词，不得将 language 标为 "Instrumental"。
  7. genre 表示一级商业流派；style 表示子风格、质感或制作风格。若有冲突，请保持 genre 更宽泛。
  8. 在输出前，请逐字段检查是否违反以上规则，并在发现问题时自动修正。
  9. 只输出 JSON，不要任何解释文字。

  【明确禁止标签（即使在训练数据中很常见，也绝对禁止输出）】

  Mood 禁止：
  - Epic, Energetic, Upbeat, Groovy, Chill, Emotional

  Genre 禁止：
  - J-Pop, K-Pop, C-Pop, J-Rock, K-Rock

  如果原始语义属于上述标签，必须按以下方式表达：
  - Epic → 使用 energy=High + style=Cinematic/Orchestral + mood=Hopeful/Dark/Mysterious
  - J-Pop/K-Pop/C-Pop → 使用 region + genre=Pop + 可选 style=City Pop

  【歌曲信息】
  标题: {title}
  艺术家: {artist}
  专辑: {album}
  歌词: {lyrics}

  【标签白名单】

  mood (选择 1–3 个，按重要性排序):
  Happy, Sad, Romantic, Peaceful, Dreamy, Dark,
  Melancholic, Hopeful, Nostalgic, Mysterious, Playful, Warm

  energy (选择 1 个):
  Low, Medium, High

  genre (选择 1–2 个):
  Pop, Rock, Hip-Hop, R&B, Electronic, Folk,
  Jazz, Classical, Metal, Indie, Soundtrack, Ambient, World, None

  style (选择 0–3 个):
  Ballad, Acoustic, Orchestral, Cinematic, Lo-fi,
  Synthwave, Trap, House, Techno, EDM,
  Alternative, Post-rock, Hard Rock, Soft Rock,
  Dream Pop, Minimalist, Retro, Modern, Punk, City Pop

  scene (选择 0–2 个):
  Sleep, Study, Relax, Focus, Driving, Workout,
  Running, Party, Background, Travel,
  Morning, Night, Meditation, Gaming

  region (选择 1 个):
  Chinese, Taiwanese, Hong Kong, Japanese, Korean, Western, Other

  culture (选择 1 个):
  Anime, Film, TV, Game, Idol, Vocaloid, None

  language (选择 1 个):
  Chinese, Japanese, Korean, English, Instrumental, Other

  【输出格式】
  ```json
  {{
    "mood": ["..."],
    "energy": "...",
    "genre": ["..."],
    "style": ["..."],
    "scene": ["..."],
    "region": "...",
    "culture": "...",
    "language": "...",
    "confidence": 0.00
  }}
  ```

# API 调用配置
api:
  timeout: 60
  max_tokens: 1024
  temperature: 0.2
  top_p: 0.9
  retry_delay: 1
  max_retries: 3
  retry_backoff: 2
